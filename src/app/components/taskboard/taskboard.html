<div class="kanban-container">
  <h2 class="kanban-title">Neue Aufgabe</h2>
  <div class="kanban-input-row">
    <input [(ngModel)]="newTitle" type="text" placeholder="Aufgabe eingeben" class="kanban-input" />
    <textarea [(ngModel)]="newDescription" placeholder="Beschreibung (optional)" class="kanban-input textarea" rows="2"></textarea>
    <input [(ngModel)]="newDeadline" type="date" class="kanban-input date-input" placeholder="Deadline" />
    <button (click)="addTask()" class="kanban-add-btn">Hinzufügen</button>
  </div>

  <div class="kanban-board" cdkDropListGroup>
    <div class="kanban-column" data-status="todo">
      <h3 class="kanban-column-title">To Do</h3>
      <ul class="kanban-list" cdkDropList id="todoList" [cdkDropListConnectedTo]="dropListIds" (cdkDropListDropped)="onDrop($event, 'todo')">
        <li *ngFor="let task of todoTasks$ | async" class="kanban-card" [attr.data-task-id]="task.id" cdkDrag>
          <div class="kanban-card-content">
            <button (click)="deleteTask(task.id)" class="kanban-delete-btn" title="Löschen">
              🗑️
            </button>
            <strong class="kanban-card-title">{{ task.title }}</strong>
            <span class="kanban-card-desc">Beschreibung: {{ task.description || '-' }}</span>
            <span class="kanban-card-date">Erstellt: {{ task.createdAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-date">Letzte Änderung: {{ task.updatedAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-time">Tracked Time: {{ task.totalTrackedTime }} Sek.</span>
          </div>
        </li>
      </ul>
    </div>
    <div class="kanban-column" data-status="in-progress">
      <h3 class="kanban-column-title">In Progress</h3>
      <ul class="kanban-list" cdkDropList id="inProgressList" [cdkDropListConnectedTo]="dropListIds" (cdkDropListDropped)="onDrop($event, 'in-progress')">
        <li *ngFor="let task of inProgressTasks$ | async" class="kanban-card" [attr.data-task-id]="task.id" cdkDrag>
          <div class="kanban-card-content">
            <button (click)="deleteTask(task.id)" class="kanban-delete-btn" title="Löschen">
              🗑️
            </button>
            <strong class="kanban-card-title">{{ task.title }}</strong>
            <span class="kanban-card-desc">Beschreibung: {{ task.description || '-' }}</span>
            <span class="kanban-card-date">Erstellt: {{ task.createdAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-date">Letzte Änderung: {{ task.updatedAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-time">Tracked Time: {{ task.totalTrackedTime }} Sek.</span>
          </div>
        </li>
      </ul>
    </div>
    <div class="kanban-column" data-status="done">
      <h3 class="kanban-column-title">Done</h3>
      <ul class="kanban-list" cdkDropList id="doneList" [cdkDropListConnectedTo]="dropListIds" (cdkDropListDropped)="onDrop($event, 'done')">
        <li *ngFor="let task of doneTasks$ | async" class="kanban-card" [attr.data-task-id]="task.id" cdkDrag>
          <div class="kanban-card-content">
            <button (click)="deleteTask(task.id)" class="kanban-delete-btn" title="Löschen">
              🗑️
            </button>
            <strong class="kanban-card-title">{{ task.title }}</strong>
            <span class="kanban-card-desc">Beschreibung: {{ task.description || '-' }}</span>
            <span class="kanban-card-date">Erstellt: {{ task.createdAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-date">Letzte Änderung: {{ task.updatedAt | date:'dd.MM.yyyy, HH:mm' }}</span>
            <span class="kanban-card-time">Tracked Time: {{ task.totalTrackedTime }} Sek.</span>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

