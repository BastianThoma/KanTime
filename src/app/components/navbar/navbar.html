<nav class="navbar" role="navigation" aria-label="Hauptnavigation">
  <div class="navbar__container">
    <!-- Logo Section -->
    <a routerLink="/" class="navbar__brand" (click)="closeMobileMenu()">
      <div class="brand__logo">
        <span>📊</span>
      </div>
      <span class="brand__text">KanTime</span>
    </a>

    <!-- Main Navigation -->
    <ul class="navbar__nav" role="menubar" [class.navbar__nav--open]="isMobileMenuOpen">
      <li class="nav__item" *ngFor="let item of navItems" role="none">
        <a 
          [routerLink]="item.route"
          routerLinkActive="nav__link--active"
          [routerLinkActiveOptions]="{ exact: item.route === '/' }"
          class="nav__link"
          role="menuitem"
          [attr.aria-current]="isActiveRoute(item.route) ? 'page' : null"
          [title]="item.description"
          (click)="closeMobileMenu()">
          <span class="nav__icon">{{ item.icon }}</span>
          <span class="nav__text">{{ item.label }}</span>
        </a>
      </li>
    </ul>

    <!-- Action Buttons -->
    <div class="navbar__actions">
      <!-- Drag & Drop Zone für Tracker Parking -->
      <div 
        class="docking-zone"
        *ngIf="!dockingService.isDocked() && !dockingService.isMobile()"
        cdkDropList
        id="tracker-parking-zone"
        [cdkDropListData]="[]"
        (cdkDropListDropped)="onTrackerDrop($event)"
        [title]="'Tracker hier ablegen zum Parken'"
        #dockingZone>
        <span class="docking-icon">📦</span>
        <span class="docking-text">Tracker parken</span>
      </div>

      <!-- Docked Timer Display (Desktop) -->
      <div 
        class="docked-timer" 
        *ngIf="dockingService.isDocked() && trackerHasActiveTime() && !dockingService.isMobile()"
        (click)="onDockedTimerClick()"
        [title]="'Klicken zum Maximieren • ' + getCurrentTaskTitle()">
        <span class="timer-icon">⏱️</span>
        <span class="timer-text">{{ getCurrentTimerDisplay() }}</span>
      </div>

      <!-- Alternative: Zeige immer wenn gedockt (für Tests) -->
      <div 
        class="docked-timer" 
        *ngIf="dockingService.isDocked() && !dockingService.isMobile() && !trackerHasActiveTime()"
        (click)="onDockedTimerClick()"
        title="Klicken zum Maximieren • Kein Timer aktiv"
        style="opacity: 0.6;">
        <span class="timer-icon">⏲️</span>
        <span class="timer-text">00:00:00</span>
      </div>

      <!-- Mobile Timer Button -->
      <button 
        class="action__btn action__btn--timer" 
        *ngIf="dockingService.isMobile()"
        (click)="onMobileTimerClick()"
        [title]="trackerHasActiveTime() ? 'Timer läuft: ' + getCurrentTimerDisplay() : 'Timer öffnen'">
        <span class="action__icon" [class.active]="trackerHasActiveTime()">
          {{ trackerHasActiveTime() ? '⏱️' : '⏲️' }}
        </span>
        <span class="mobile-timer-text" *ngIf="trackerHasActiveTime()">{{ getCurrentTimerDisplay() }}</span>
      </button>

      <button class="action__btn action__btn--settings" type="button" title="Einstellungen">
        <span class="action__icon">⚙️</span>
      </button>
      <button class="action__btn action__btn--profile" type="button" title="Profil">
        <span class="action__icon">👤</span>
      </button>
    </div>

    <!-- Mobile Menu Toggle -->
    <button 
      class="navbar__toggle" 
      type="button"
      [class.navbar__toggle--active]="isMobileMenuOpen"
      (click)="toggleMobileMenu()"
      aria-label="Menü umschalten">
      <span class="toggle__line"></span>
      <span class="toggle__line"></span>
      <span class="toggle__line"></span>
    </button>
  </div>

  <!-- Mobile Overlay -->
  <div 
    class="navbar__overlay"
    [class.navbar__overlay--active]="isMobileMenuOpen"
    (click)="closeMobileMenu()">
  </div>
</nav>